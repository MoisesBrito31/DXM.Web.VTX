#pragma checksum "C:\Users\Moises Brito\Documents\GitHub\DXM.Web.VTX\DXM.Web.Interface\Views\Config\DxmConfig.cshtml" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "bd32f04e90d6ac7c5a19b5ef9b9690fcd528f7d0"
// <auto-generated/>
#pragma warning disable 1591
[assembly: global::Microsoft.AspNetCore.Razor.Hosting.RazorCompiledItemAttribute(typeof(AspNetCore.Views_Config_DxmConfig), @"mvc.1.0.view", @"/Views/Config/DxmConfig.cshtml")]
[assembly:global::Microsoft.AspNetCore.Mvc.Razor.Compilation.RazorViewAttribute(@"/Views/Config/DxmConfig.cshtml", typeof(AspNetCore.Views_Config_DxmConfig))]
namespace AspNetCore
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Mvc;
    using Microsoft.AspNetCore.Mvc.Rendering;
    using Microsoft.AspNetCore.Mvc.ViewFeatures;
#line 1 "C:\Users\Moises Brito\Documents\GitHub\DXM.Web.VTX\DXM.Web.Interface\Views\_ViewImports.cshtml"
using DXM.Web.Interface;

#line default
#line hidden
#line 2 "C:\Users\Moises Brito\Documents\GitHub\DXM.Web.VTX\DXM.Web.Interface\Views\_ViewImports.cshtml"
using DXM.Web.Interface.Models;

#line default
#line hidden
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"bd32f04e90d6ac7c5a19b5ef9b9690fcd528f7d0", @"/Views/Config/DxmConfig.cshtml")]
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"3dbfc5f91b30706872d88ad7a7fe2ce93e5d6979", @"/Views/_ViewImports.cshtml")]
    public class Views_Config_DxmConfig : global::Microsoft.AspNetCore.Mvc.Razor.RazorPage<dynamic>
    {
        #pragma warning disable 1998
        public async override global::System.Threading.Tasks.Task ExecuteAsync()
        {
            BeginContext(0, 2, true);
            WriteLiteral("\r\n");
            EndContext();
#line 2 "C:\Users\Moises Brito\Documents\GitHub\DXM.Web.VTX\DXM.Web.Interface\Views\Config\DxmConfig.cshtml"
  
    ViewData["Title"] = "DxmConfig";

#line default
#line hidden
            BeginContext(47, 7438, true);
            WriteLiteral(@"
<style>
    input {
        max-width: 180px;
    }
</style>

<div class=""card-title mt-5 mb-5"">
    <div class=""row mb-5"">
        <div class=""col text-left"">
            <h2>Configuração do DXM</h2>
        </div>
        <div class=""col text-right btn-group"">
            <button type=""button"" class=""btn btn-primary"" onclick=""document.location.href='/config/index'"">Rede</button>
            <button type=""button"" class=""btn btn-primary "" onclick=""document.location.href='/config/turno'"">Turno</button>
            <button type=""button"" class=""btn btn-primary "" onclick=""document.location.href='/config/mapIo'"">Mapa I/O</button>
            <button type=""button"" class=""btn btn-primary disabled"" onclick=""document.location.href='/config/DxmConfig'"">Programar</button>
            <button type=""button"" class=""btn btn-primary"" onclick=""document.location.href='/config/reset'"">Destravar</button>
        </div>
    </div>
    <hr>

</div>


<div class=""container-fluid"">
    <div class=""m-auto"" ");
            WriteLiteral(@"style=""max-width:600px"">
        <h2 class=""text-center"">Calibração do DXM</h2>
        <p>O processo que se segue ira carregar o xml e o script para que o dxm realize cálculo de OEE <br />
        Atenção! Durante o processo não desligue ou desconecte o DXM da rede</p>
    </div>
    <div class=""m-auto pt-4 pb-4"" style=""max-width:200px"">
        <button id=""butInicia"" class=""btn btn-block btn-success"" type=""button"" onclick=""iniciar()"">
            <span id=""splint"" class=""spinner-border spinner-border-sm"" style=""visibility:collapse""></span>
            <span id=""butInfo"">Iniciar</span>
        </button>
        
    </div>
    <div class=""progress m-auto"" style=""height:40px; max-width:600px"">
        <div id=""progress"" class=""progress-bar progress-bar-striped progress-bar-animated bg-success"" style=""width:0%;""></div>
    </div>
</div>



<script type=""text/javascript"">
    var barra = document.getElementById(""progress"");
    var butInicia = document.getElementById(""butInicia"");
    var ");
            WriteLiteral(@"infoInicia = document.getElementById(""butInfo"");
    var roda = document.getElementById(""splint"");
    var percent = 0;

    function iniciar() {
        percent = 0;
        infoInicia.innerHTML = ""Em processo"";
        roda.setAttribute(""style"", ""visibility:visible"");
        barUpdate();
        travado();
    }
    function barUpdate() {
         percent += 10;
        barra.setAttribute(""style"", `width:${percent}%`);
    }
    function fim() {
        toastr.success(""DXM calibrado"", ""Sucesso"");
        infoInicia.innerHTML = ""Reiniciando DXM, Aguarde..."";
        //roda.setAttribute(""style"", ""visibility:collapse"");
        barra.setAttribute(""style"", `width:100%`);
        setTimeout(function () {
            document.location.href = ""/Config/Index"";
        }, 5000);
    }
    function falha() {       
        infoInicia.innerHTML = ""Reiniciar"";
        roda.setAttribute(""style"", ""visibility:collapse"");
        barra.setAttribute(""style"", `width:0%`);
    }
    function trav");
            WriteLiteral(@"ado() {
        var xhp = new XMLHttpRequest()
        xhp.onreadystatechange = function () {
            if (this.readyState === 4 && this.status === 200) {
                var re = this.responseText
                //alert(re);
                if (re == ""travado"") {
                    barUpdate();
                    destravar();
                }
                else {
                    baixaLog();                    
                }
            }
        }
        xhp.open(""Get"", ""/Config/getEstado"");
        xhp.send();
    }
    function destravar() {
          var xhp = new XMLHttpRequest()
        xhp.onreadystatechange = function () {
            if (this.readyState === 4 && this.status === 200) {
                var re = this.responseText
                //alert(re);
                if (re == ""ok"") {
                    barUpdate();
                    travado();                   
                }
                else {
                    toastr.error(""erro"",""Fal");
            WriteLiteral(@"ha ao destravar DXM"")
                    falha();
                }
            }
        }
        xhp.open(""Get"", ""/Config/destravar"");
        xhp.send();
    }
     function baixaLog() {
          var xhp = new XMLHttpRequest()
        xhp.onreadystatechange = function () {
            if (this.readyState === 4 && this.status === 200) {
                var re = this.responseText
                //alert(re);
                if (re == ""ok"") {
                    enviarSB();                
                }
                else {
                    //toastr.error(re,""erro"")
                    enviarSB();  
                }
            }
        }
        xhp.open(""Get"", ""/Config/baixaLog"");
        xhp.send();
    }
     function travar() {
          var xhp = new XMLHttpRequest()
        xhp.onreadystatechange = function () {
            if (this.readyState === 4 && this.status === 200) {
                var re = this.responseText
                //alert(re);
           ");
            WriteLiteral(@"     if (re == ""ok"") {
                    barUpdate();
                    fim();
                }
                else {
                    toastr.error(""Falha critica do processo, tente novamente"",""Falha erro"")
                     falha();
                }
            }
        }
        xhp.open(""Get"", ""/Config/travar"");
        xhp.send();
    }
    function enviarSB() {
          var xhp = new XMLHttpRequest()
        xhp.onreadystatechange = function () {
            if (this.readyState === 4 && this.status === 200) {
                var re = this.responseText
                //alert(re);
                if (re == ""ok"") {
                    barUpdate();
                    validaSB();
                }
                else {
                    toastr.error(""Falha ao tentar envia o Script"",""Erro"")
                     falha();
                }
            }
        }
        xhp.open(""Get"", ""/Config/sendScript"");
        xhp.send();
    }
    function validaSB() {");
            WriteLiteral(@"
          var xhp = new XMLHttpRequest()
        xhp.onreadystatechange = function () {
            if (this.readyState === 4 && this.status === 200) {
                var re = this.responseText
                //alert(re);
                if (re == ""ok"") {
                    barUpdate();
                    enviarXml();
                }
                else {
                    toastr.error(""arquivo de Script enviado porem inexistente na memoria do DXM"",""Erro"")
                     falha();
                }
            }
        }
        xhp.open(""Get"", ""/Config/exist?file=OEE.sb"");
        xhp.send();
    }
    function enviarXml() {
          var xhp = new XMLHttpRequest()
        xhp.onreadystatechange = function () {
            if (this.readyState === 4 && this.status === 200) {
                var re = this.responseText
                //alert(re);
                if (re == ""ok"") {
                    barUpdate();
                    setTimeout(travar,2000);
           ");
            WriteLiteral(@"     }
                else {
                    toastr.error(""Falha ao tentar envia o XML"",""Erro"")
                    travar();
                }
            }
        }
        xhp.open(""Get"", ""/Config/sendXml"");
        xhp.send();
    }
    

</script>");
            EndContext();
        }
        #pragma warning restore 1998
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.ViewFeatures.IModelExpressionProvider ModelExpressionProvider { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IUrlHelper Url { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IViewComponentHelper Component { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IJsonHelper Json { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IHtmlHelper<dynamic> Html { get; private set; }
    }
}
#pragma warning restore 1591
